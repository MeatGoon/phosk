<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.teamproject.phosk.branch.menu.dao.ItemDAO">
	<sql id="itemAllInfo">
		select pb.branch_num, pc.category_num, pc.category_name,
		pi.item_num, pi.item_name, pi.item_image, pi.item_info, pi.item_lastdate, pi.item_regidate
		from phosk_branch pb INNER JOIN phosk_category pc on (pb.branch_num = pc.branch_num)
		INNER JOIN phosk_item pi on(pc.category_num = pi.category_num)
	</sql>
	<!-- 아이템까지의 값 불러오기 -->
	<select id="itemDetailInfo" resultType="branchItemInfo">
		<include refid="itemAllInfo" />
		where pb.branch_num = #{branch_num} and pc.category_num =
		#{category_num} and pi.item_num = #{item_num}
	</select>
	<!-- 해당 아이템의 기본 가격 불러오기 -->
	<select id="basicItemOption" resultType="itemOption">
		select basic_option, basic_price 
		from phosk_basicoption where branch_num = #{branch_num} and
		category_num = #{category_num} and item_num = #{item_num}
	</select>
	<!-- 해당 아이템의 추가옵션들 불러오기 -->
	<select id="addItemOption" resultType="itemOption">
		select add_option, add_price 
		from phosk_addoption where branch_num = #{branch_num} and
		category_num = #{category_num} and item_num = #{item_num}
	</select>
<!-- 	<insert id="insertItem">
		insert into phosk_item VALUES(#{}, #{}, #{}, #{}, #{}, #{}, sysdate, sysdate)
	</insert>
	<insert id="insertBOption">
		insert into phosk_basicOption VALUES(#{}, #{}, #{}, #{}, #{})
	</insert>
	<insert id="insertAOption">
		insert into phosk_addOption values(#{}, #{}, #{}, #{}, #{})
	</insert> -->
</mapper>